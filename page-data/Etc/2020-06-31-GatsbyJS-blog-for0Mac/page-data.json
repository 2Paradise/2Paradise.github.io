{"componentChunkName":"component---src-templates-post-template-tsx","path":"/Etc/2020-06-31-GatsbyJS-blog-for0Mac/","result":{"data":{"site":{"siteMetadata":{"title":"2P Enginnering Blog","author":"@2Paradise"}},"post":{"fields":{"slug":"/Etc/2020-06-31-GatsbyJS-blog-for0Mac/"},"frontmatter":{"title":"GatsbyJS 블로그 만들기 for Mac","hide":false,"type":"post","date":"2020-06-30","desc":"윈도우 환경에서만 개발을 해왔던 초보 mac 유저에게는 모든게 낯설고 힘들다. React를 접하며 공부 목적의 Github Blog를 개설하기 위해 겪은 시행착오를 기준으로 주의할 점과 함께 포스팅 하려 한다. 기본적으로 GatsbyJs 는 React 기반의 정적 페이지 생성 프레임 워크로, 가공할 정보를 GraphQL에서 가져와 Bulid 시점에 정적 페이지를 만들어 내는 방식이다.","tag":["Gatsby","React","GraphQL","ETC","Blog"]},"html":"<p>윈도우 환경에서만 개발을 해왔던 초보 mac 유저에게는 모든게 낯설고 힘들다. </p>\n<p><code class=\"language-text\">React</code> 를 접하며 공부 목적의 Github Blog를 개설하기 위해 겪은 시행착오를 기준으로 주의할 점과 함께 포스팅 하려 한다. </p>\n<p>기본적으로 GatsbyJs 는 React 기반의 정적 페이지 생성 프레임 워크로, 가공할 정보를 <code class=\"language-text\">GraphQL</code> 에서 가져와 Bulid 시점에 정적 페이지를 만들어 내는 방식이다. </p>\n<h1>기본 Gatsby Site 생성</h1>\n<p><a href=\"https://www.gatsbyjs.org/docs/quick-start/\">Quick Start</a></p>\n<p>Gatsby Tutorial 사이트를 참고하여 기본적인 Gatsby Site 생성하는 방법부터 알아보자.</p>\n<p>사용 방법은 <code class=\"language-text\">npm</code> <code class=\"language-text\">yarn</code> 모두 사용 가능하지만 본 Post 에서는 <code class=\"language-text\">npm</code> 을 사용하였다. </p>\n<h3>Gatsby CLI 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Site 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby new gatsby-site</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>현 위치에서 gatsby-site 라는 폴더를 생성 후 gatsby site를 생성한다.</li>\n</ul>\n<h3>서버 시작</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> gatsby-site\n$ gatsby develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>구동 후 <a href=\"http://localhost:8000\">localhost:8000</a> 에서 확인 할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e7b6b2e1b5120c567f5882969b06f6af/a2b91/_2020-06-21__9.48.12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAByUlEQVR42p2RTWsTURSG52eIWNOVaF1YGtNiQtLSJNpgPyZBsdYopYgUQbDpVtwWQX9D68qupPobRISCLrqwImLFSAsm5uPOzJ1pM/N4Z5KaRIsSDzycO+d9z8udGW08Nk0ymiN1IUfi3ATxoQyJyJRiksTwJPERdQ6rc3iKuOrRwQznB5IBkYEUkbMpomovozLGhqfRCumnFFJrLKfXuD++ysMr6zxZfMmjhQ1W5p/z+M4LHuSesaS0ZeX1fc3epqBmS8nVoGuiIvGp/7Awaw7FnT223r7n88citZJFtWQG2qHvX2j8Vs6+Tan8nWq9gscBvZbmuR6duIogWB7wdbsUPHtet+dvaL7Zr2CpdS5/2uHN+iu2X39pam5bO6o6M7oDW7fb/fCNzY13flLXQk+BnYIo21T2rMNpa+79eouj6Ar0cd3mbUTNZrcoqFac9vfrgT/+cqPhYct9RYP/KU0IQYBhYVkmUhpI20E6NoZhUBcGhiUxpYVUetBtW3mV31Rz4XtaGQot1N/PiePHGIylyd+aYfbaKJfnFtFv3CaZHiMcv0gim+fSbJabV3Uy+TkW7t1F17Nc1+eZiI1y6sxpTvb1EQqF+AncYDhzGxqiKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\" 2020 06 21  9 48 12\"\n        title=\" 2020 06 21  9 48 12\"\n        src=\"/static/e7b6b2e1b5120c567f5882969b06f6af/1e088/_2020-06-21__9.48.12.png\"\n        srcset=\"/static/e7b6b2e1b5120c567f5882969b06f6af/65ed1/_2020-06-21__9.48.12.png 210w,\n/static/e7b6b2e1b5120c567f5882969b06f6af/d10fb/_2020-06-21__9.48.12.png 420w,\n/static/e7b6b2e1b5120c567f5882969b06f6af/1e088/_2020-06-21__9.48.12.png 840w,\n/static/e7b6b2e1b5120c567f5882969b06f6af/78612/_2020-06-21__9.48.12.png 1260w,\n/static/e7b6b2e1b5120c567f5882969b06f6af/21cdd/_2020-06-21__9.48.12.png 1680w,\n/static/e7b6b2e1b5120c567f5882969b06f6af/a2b91/_2020-06-21__9.48.12.png 3360w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>기본 Gatsby Site 생성 및 로컬 서버 구동은 큰 이슈 없이 정상 작동 되는 것을 확인 할 수 있다. 문제는 Gatby Themes를 적용하려 할 때 발생 한다. </p>\n<h1>Gatsby Themes 적용하기</h1>\n<p>여러가지 Gatsby Themes을 제공해 주는 곳은 구글링을 통해 쉽게 접할 수 있다.</p>\n<p><a href=\"https://jamstackthemes.dev/#ssg=gatsby\">JAMstack Themes</a></p>\n<p>일반적으로 Gatsby Themes 를 적용한 블로그 생성을 위한 문서들이나, 포스팅 된 글들을 확인해보면 다음과 같은 순서로 가이드를 해주고 있다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ gatsby new blog git@github.com:wonism/gatsby-advanced-blog.git\n \n$ <span class=\"token builtin class-name\">cd</span> blog \n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span>\n$ gatsby develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p> 가지각색의 사람들이 만들고 배포하는 Gatsby themes github repositoy에서는 적용하려는 Gatsby Themes 에 맞는 node 버전을 사용해야 한다. 때문에 적용하려는 Themes 와 node 버전이 맞지 않는다면 Gatsby Site 생성 시, 또는 npm install 시 무언가 잘못되고 있다는 것을 알 수 있다. <code class=\"language-text\">nvm</code> 을 이용하여 Gatsby Themes 에 맞는 node로 버전을 변경해 주고 아래와 같이 다시 시도 해보자.</p>\n<h3>Node Version Manage</h3>\n<p><a href=\"http://jeonghwan-kim.github.io/2016/08/10/nvm.html\">NVM으로 노드 버전 관리하기</a></p>\n<p>일반적으로 Gatsby Themes Git에 들어가 보아도 node 버전을 명시해 준 곳이 많지 않기 때문에 참고하자. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">// 변경된 node 버전에 Gatsby-CLI가 깔려있지 않을 경우 다시 설치 해주어야 한다.\n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli\n$ <span class=\"token function\">git</span> clone git@github.com:wonism/gatsby-advanced-blog.git blog\n\n$ <span class=\"token builtin class-name\">cd</span> blog\n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span>\n$ <span class=\"token function\">npm</span> upgrade\n$ <span class=\"token function\">npm</span> run deploy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>정상 작동하는 것을 확인 한 뒤엔 clone 해온 <code class=\"language-text\">.git</code> 정보를 삭제하고 개인 Git 저장소를 remote 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">rm</span> -rf .git\n$ <span class=\"token function\">git</span> init\n$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n$ <span class=\"token function\">git</span> commit -m <span class=\"token string\">'blog init'</span>\n\n$ <span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/YourID/YourGitRepoName.git\n$ <span class=\"token function\">git</span> push -u origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>gh-pages 를 이용하여 Github 배포 자동화</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>setting 된 Gatsby 프로젝트에서 <code class=\"language-text\">package.json</code> 파일을 열어 아래와 같이 수정한다.</p>\n<p><code class=\"language-text\">package.json</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"scripts\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"deploy\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"gatsby build --prefix-paths &amp;&amp; gh-pages -d public -b master\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Github Pages 는 개인 사이트와 프로젝트 사이트 2가지 종류가 있다. 개인사이트의 경우 Git repository 경로그대로 이지만 프로젝트 사이트의 경우 Git repository url /reponame 형식으로 구성되어 있기 때문에 <code class=\"language-text\">gatsby-config.js</code> 파일에 아래와 같이 pathPrefix를 설정해 주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">module.exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  pathPrefix: <span class=\"token string\">\"/reponame\"</span>,\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>모든 설정이 끝났으면 </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> run deploy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/18cb87c110a22b2de4364063b8b957c7/a2b91/_2020-06-22__2.09.04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVR42pVTXU8aQRSdH2Ih5cmXPpqYmrbPthK1CMLKsCwoxj9lsH2A1vTBhvRBX+1vEHxggfLhQqJhP8bwsRx3Zjt0aTBpb3KyZ+49996dmTskV8jj6PgER4UT5NUcKM0iTVVkVA00o0H1fJzn8gVktUMoCkViX0E8mUIiqSAW20cqRXGo5aB6IEZ/ANu2wRgDe3zEZDJZivF4/Bv+2p26YI6DQd/AaDSC43HHYSBYsBlms39HME8acV0XEtPpVOBv33M8COknvBMnwY4yQfqCfyT10rgumEdkMR7odnu4uakuiDudzlxsGP15Me5vt9uCG4Yh7kBsWXbQ9QbOz7+hVPqCSuUHLi6+i/XpaRHl8lfUarc4O/sseLPZEv5i8ZPQXF//nO+CyI693p0oyjvpui661+u6SK5WaxgOTbRav8Tasiwv3kGj0cTl5RXu7x8Wtxw8h/81ebbyYsiyoPgGR+OZy1lmxDRN+LDg8OFmJmxvQH04ImbZDJbHmWMLja9j4kH8yfdBwuEwQi9WEFl9hTil0OgbbMYpPiSyiO7FsPZ6AxtRBW/3PoKmtj2Nit28ivRBBjvvt/BufR0vIxGEQiHwWk/u+k8n1CbRYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\" 2020 06 22  2 09 04\"\n        title=\" 2020 06 22  2 09 04\"\n        src=\"/static/18cb87c110a22b2de4364063b8b957c7/1e088/_2020-06-22__2.09.04.png\"\n        srcset=\"/static/18cb87c110a22b2de4364063b8b957c7/65ed1/_2020-06-22__2.09.04.png 210w,\n/static/18cb87c110a22b2de4364063b8b957c7/d10fb/_2020-06-22__2.09.04.png 420w,\n/static/18cb87c110a22b2de4364063b8b957c7/1e088/_2020-06-22__2.09.04.png 840w,\n/static/18cb87c110a22b2de4364063b8b957c7/78612/_2020-06-22__2.09.04.png 1260w,\n/static/18cb87c110a22b2de4364063b8b957c7/21cdd/_2020-06-22__2.09.04.png 1680w,\n/static/18cb87c110a22b2de4364063b8b957c7/a2b91/_2020-06-22__2.09.04.png 3360w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>gh-pages 에 의해 자동으로 master branch에 빌드된 파일들이 올라간 것을 확인 할 수 있다. 빌드된 파일들이 master branch에 push 되기 때문에 소스파일 저장할 새로운 branch를 추가하여 소스 관리 하는 것이 좋아 보인다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> checkout -b develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Reference</h3>\n<p><a href=\"https://www.gatsbyjs.org/\">GatsbyJS</a></p>","id":"51dafee4-ab78-5920-904b-ea7fc0c49cba"}},"pageContext":{}},"staticQueryHashes":["2274161303","405191750"]}